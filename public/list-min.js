class IndexOutOfBoundsException extends Error{constructor(...t){super(...t)}}class NoSuchElementException extends Error{constructor(...t){super(...t)}}class List extends Array{get size(){return this.length}get indices(){return Object.keys(this).map(t=>parseInt(t)).toList()}get lastIndex(){return this.length-1}get(t,e){return Object.keys(this).includes(String(t))?this[t]:e}contains(...t){return this.some(e=>t.includes(e))}containsAll(...t){return this.includesAll(...t)}subList(t,e){return this.slice(t,e)}first(t){return this.match(t,1)}firstOrNull(t){return this.matchOrNull(t,1)}second(t){return this.match(t,2)}secondOrNull(t){return this.matchOrNull(t,2)}third(t){return this.match(t,3)}thirdOrNull(t){return this.matchOrNull(t,3)}fourth(t){return this.match(t,4)}fourthOrNull(t){return this.matchOrNull(t,4)}fifth(t){return this.match(t,5)}fifthOrNull(t){return this.matchOrNull(t,5)}sixth(t){return this.match(t,6)}sixthOrNull(t){return this.matchOrNull(t,6)}seventh(t){return this.match(t,7)}seventhOrNull(t){return this.matchOrNull(t,7)}eighth(t){return this.match(t,8)}eighthOrNull(t){return this.matchOrNull(t,8)}ninth(t){return this.match(t,9)}ninthOrNull(t){return this.matchOrNull(t,9)}tenth(t){return this.match(t,10)}tenthOrNull(t){return this.matchOrNull(t,10)}hundredth(t){return this.match(t,100)}hundredthOrNull(t){return this.matchOrNull(t,100)}last(t){return this.reverse().first(t)}lastOrNull(t){return this.reverse().firstOrNull(t)}match(t,e=1){if(!t)return this[e-1];{let r=0;for(let i of this)if(isMatch(t,i)){if(r===e-1)return i;r++}throw new NoSuchElementException("No such element")}}matchOrNull(t,e=1){if(!t)return this[e-1];{let r=0;for(let i of this)if(isMatch(t,i)){if(r===e-1)return i;r++}return null}}firstOfEach(){return this.nthOfEach(0)}lastOfEach(){return this.map(t=>t[t.length-1])}nthOfEach(t){return this.map(e=>e[t])}joinWith(t,e="",r=""){return`${e}${this.join(t)}${r}`}joinEach(t,e="",r=""){return this.map(i=>i.toList().joinWith(t,e,r))}splitEach(...t){let e=t.join("|"),r=RegExp(e,"gi");return this.map(t=>t.split(r).toList())}trimEach(){return this.map(t=>t.trim())}firstNotNullOf(t){for(let e of this)if(e&&t(e))return t(e);throw new NoSuchElementException("No such element")}firstNotNullOfOrNull(t){for(let e of this)if(e&&t(e))return t(e);return null}halve(t=!0){let e=t?Math.floor(this.length/2):Math.ceil(this.length/2),r=this.slice(0,e).toList(),i=this.slice(e,this.length).toList();return listOf(r,i)}firstHalf(t=!0){return this.halve(!t).first()}secondHalf(t=!1){return this.halve(t).last()}lastHalf(t=!1){return this.secondHalf(t)}drop(t){return this.slice(t)}dropLast(t){return this.slice(0,this.length-t)}take(t){return this.head(t)}takeLast(t){return this.tail(t)}takeWhile(t){let e=listOf(),r=!1;for(let i of this)if(t(i))e.push(i),r=!0;else{if(!r)continue;break}return e}takeLastWhile(t){let e=listOf(),r=!1;for(let i of this.reverse())if(t(i))e.push(i),r=!0;else{if(!r)continue;break}return e.reverse()}dropWhile(t){let e=!1,r=listOf();for(let i of this)(!t(i)||e)&&(e=!0,r.push(i));return r}dropLastWhile(t){let e=!1,r=listOf();for(let i of this.reverse())t(i)&&!e?e=!0:r.push(i);return r.reverse()}elementAt(t){if(this[t])return this[t];let e=`Index out of bounds: ${t}`;throw new IndexOutOfBoundsException(e)}elementAtOrElse(t,e){return t<this.length?this[t]:isFn(e)?e():e}elementAtOrNull(t){return this[t]?this[t]:null}ifEmpty(t){return this.isEmpty()?t:this}ifNotEmpty(t){return this.isNotEmpty()?t:this}filterIsInstance(t){return t.name?this.filter(e=>e instanceof t||typeof e===t.name.toLowerCase()):this}filterIsInstanceTo(t,e){let r=this.filter(t=>t instanceof e);return new List(...t.concat(r))}filterNot(t){return this.filter(e=>!isMatch(t,e))}filterNotNull(){return this.filter(t=>null!==t)}filterFirstNotNull(){let t=!1,e=listOf();for(let r of this){if(null==r&&!t){t=!0;continue}e.push(r)}return e}filterTruthy(t=!0){return this.filter(e=>t&&0===e||Boolean(e))}filterFalsy(t=!1){return this.filter(e=>t?0!==e&&!Boolean(e):!Boolean(e))}filterNotNullTo(t){let e=this.filterNotNull();return t.concat(e)}filterNotUndefined(){return this.filter(t=>void 0!==t)}filterTo(t,e){let r=this.filter(e);return new List(...t.concat(r))}filterNotTo(t,e){let r=this.filterNot(e);return new List(...t.concat(r))}flatten(t){return this.flat(t)}compact(){return this.filter(Boolean).filter(t=>""!==t)}fold(t,e){if(!e&&0!==e)throw Error("Initial value must be specified");return this.reduce(t,e)}joinTo(t,e,r="",i=""){if(!Array.isArray(t)){let s=`Argument 'list' must be a type of Array or List. Found: ${typeof t}`;throw Error(s)}return t.toList().add(`${r}${this.join(e)}${i}`)}async mapAsync(t){let e=listOf();for(let[r,i]of this.entries()){let s=await t(r,i);e.push(s)}return e}async forEachAsync(t){for(let[e,r]of this.entries())await t(e,r)}exclude(...t){return this.filter(e=>!t.includes(e))}distinct(){return listOf(...this.unique())}distinctBy(t){let e=listOf();for(let r of this){let i=!e.find(e=>t(r)==t(e));i&&e.push(r)}return e}unique(){return new Set(this)}toUpperCase(){return listOf(...this).map(t=>t.toUpperCase())}capitalize(){return listOf(...this).map(t=>t.extend().capitalize())}toLowerCase(){return listOf(...this).map(t=>t.toLowerCase())}sum(){return this.reduce((t,e)=>+t+e,0)}sumOf(t){return this.map(t).sum()}product(){return this.reduce((t,e)=>t*e,1)}productOf(t){return this.map(t).product()}isEmpty(){return 0===this.length}isNotEmpty(){return this.length>0}chunked(t){if(t<1)return this;let e=listOf();for(let r=0;r<this.length;r+=Math.abs(t))e.push(this.slice(r,r+Math.abs(t)));return e}segment(t){if(t<1||t>this.length)return this;let e=Math.ceil(this.length/t);return this.chunked(e)}includesAll(...t){let e=t.flat();for(let r of e)if(!this.includes(r))return!1;return!0}intersect(t){return this.intersection(t)}intersection(...t){return t.every(t=>t instanceof Array)?t.reduce((t,e)=>t.filter(t=>e.includes(t))):null}difference(t){if(!t||!(t instanceof Array))return null;let e=listOf();return t.forEach(t=>{this.includes(t)||e.push(t)}),this.forEach(r=>{t.includes(r)||e.push(r)}),e}union(t){return new Set(this.intersect(t))}count(t){if(!t)return this.length;{let e=0;return this.forEach((r,i)=>{let s=isFn(t)?t(r,i):r===t;s&&e++}),e}}maxOf(t){return this.map(t).max()}maxBy(t,e=!1){let r=this.map(t).max();return e?this.filter(e=>t(e)===r):this.find(e=>t(e)===r)}minOf(t){return this.map(t).min()}minBy(t,e=!1){let r=this.map(t).min();return e?this.filter(e=>t(e)===r):this.find(e=>t(e)===r)}max(){return Math.max(...this)}min(){return Math.min(...this)}minmax(){return{min:this.min(),max:this.max()}}minmaxOf(t){return{min:this.minOf(t),max:this.maxOf(t)}}minmaxBy(t,e=!1){return{min:this.minBy(t,e),max:this.maxBy(t,e)}}nthLargest(t){return this.sortNumbersDescending().distinct()[t-1]}nthLargestOf(t,e){return this.map(t).sortNumbersDescending().distinct()[e-1]}nthSmallest(t){return this.sortNumbers().distinct()[t-1]}nthSmallestOf(t,e){return this.map(t).sortNumbers().distinct()[e-1]}plus(...t){return this.concat(t)}minus(...t){return this.exclude(...t)}scan(t,e=0){let r=listOf(),i=this.reduce((e,i)=>{let s=t(e,i);return r.push(e),s},e);return r.add(i)}single(t){let e=this.filter(t);if(1!==e.length){let r=`No single element matches the given predicate Found: (${e.length})`;throw new NoSuchElementException(r)}return e.first()}singleOrNull(t){let e=this.filter(t);return 1!==e.length?null:e.first()}round(){return this.map(t=>Math.round(t))}ceil(){return this.map(t=>Math.ceil(t))}floor(){return this.map(t=>Math.floor(t))}none(t){if(!t)return 0===this.length;for(let e of this)if(isMatch(t,e))return!1;return!0}indicesOf(t){let e=listOf();for(let r=0;r<this.length;r++)this[r]===t&&e.push(r);return e}delete(...t){for(let e of t)for(let r=this.length;r>=0;r--)this[r]===e&&this.splice(r,1);return this}random(){let t=Math.floor(Math.random()*this.length);return this[t]}sample(t,e=!0){let r=listOf();if(e)for(;r.length<t;){let i=Math.floor(Math.random()*this.length);r.push(this[i])}else{let s=this.slice();if(t>this.length){let n=`Sample size '${t}' is greater than list length '${this.length}'`;throw Error(n)}for(;r.length<t;){let l=Math.floor(Math.random()*s.length),h=s[l];s.splice(l,1),r.push(h)}}return r}shuffled(){return this.sort(()=>Math.random()-.5)}toBoolean(){return this.map(t=>Boolean(t))}all(t,e){return this.every(t,e)}any(t,e){return this.some(t,e)}groupBy(t){let e={},r=List.from(new Set(this.map(t)));return r.forEach(r=>{e[r]=this.filter(e=>t(e)===r)}),e}groupByTo(t,e){let r=this.groupBy(e);for(let i of Object.keys(r))t.hasOwnProperty(i)?t[i]=[...t[i],...r[i]]:t[i]=r[i];return t}binarySearch(t,e=0,r=this.length){let i=Math.floor((r-e)/2+e);return t===this[i]?i:1===Math.abs(e-r)?null:t<this[i]?this.binarySearch(t,e,i):this.binarySearch(t,i,r)}binarySearchBy(t,e,r=0,i=this.length){let s=Math.floor((i-r)/2+r),n=e(this[s]);return t===n?s:1===Math.abs(r-i)?null:t<n?this.binarySearchBy(t,e,r,s):this.binarySearchBy(t,e,s,i)}mapTo(t,e){let r=this.map(e);return new List(...t.concat(r))}mapNotNull(t){let e=listOf();for(let r=0;r<this.length;r++)if(null!==this[r]&&void 0!==this[r]){let i=t(this[r],r);e.push(i)}return e}mapNotNullTo(t,e){if(!Array.isArray(t))throw Error("Parameter 'destination' must be an Array or List");let r=listOf();for(let i=0;i<this.length;i++)if(null!==this[i]&&void 0!==this[i]){let s=e(this[i],i);r.push(s)}return new List(...t.concat(r))}mapWith(t){let e=new Map;for(let r=0;r<Math.min(this.length,t.length);r++)e.set(this[r],t[r]);return e}toObject(){return Object.fromEntries(this)}toMap(){let t=new Map;for(let e=0;e<this.length;e++)t.set(this[e][0],this[e][1]);return t}unzip(){let t=Math.max(...this.map(t=>t.length)),e=listOf(...List.from({length:t},()=>[]));return this.forEach(r=>{for(let i=0;i<t;i++)e[i].push(r[i])}),e}zip(...t){return this.map((e,r)=>[e,...t.map(t=>t[r]).toList()].toList()).toList()}pairWith(t){let e={};for(let r=0;r<Math.min(this.length,t.length);r++)e[this[r]]=t[r];return e}partition(t){let e=listOf(),r=listOf();for(let i of this)isMatch(t,i)?e.push(i):r.push(i);return listOf(e,r)}repeat(t=1){let e=listOf();for(let r of listOf(0,t-1).range())e.push(...this);return e}reversed(){return listOf(...this).reverse()}search(t,e=!1){return e?this.filter(e=>e.includes(t)):this.filter(e=>e.toLowerCase().includes(t.toLowerCase()))}sortBy(t){let e=this.map(t=>t);return e.sort((e,r)=>t(e)>t(r)?1:-1)}sortedBy(t){return this.sortBy(t)}sortByDescending(t){let e=this.map(t=>t);return e.sort((e,r)=>t(e)>t(r)?-1:1)}sortedByDescending(t){return this.sortByDescending(t)}sortNumbers(){return this.sort((t,e)=>t-e)}sortNumbersDescending(){return this.sort((t,e)=>e-t)}add(...t){for(let e of t)this.push(e);return this}mean(){return this.reduce((t,e)=>+t+e,0)/this.length}median(){let t=this.sort((t,e)=>t-e),e=Math.floor(t.length/2);return t[e]}mode(){let t=this.counts(),e=Math.max(...Object.values(t));for(let[r,i]of Object.entries(t))if(i===e)return r}stdev(){let t=this.reduce((t,e)=>+t+e)/this.length;return Math.sqrt(this.map(e=>(e-t)**2).reduce((t,e)=>+t+e)/this.length)}filterOddNumbers(){return this.filter(t=>t%2==1)}filterEvenNumbers(){return this.filter(t=>t%2==0)}filterPrimeNumbers(){return this.filter(t=>{for(let e=2,r=Math.sqrt(t);e<=r;e++)if(t%e==0)return!1;return t>1})}counts(){let t={};for(let e=0;e<this.length;e++)this[e]in t?t[this[e]]=+t[this[e]]+1:t[this[e]]=1;return t}associate(t){let e={};for(let[r,i]of this.entries())e[i]=t(i,r);return e}associateBy(t){let e={};for(let r of this)e[t(r)]=r;return e}associateWith(t){let e=new Map;for(let r of this)e.set(r,t(r));return e}prefix(t){return this.map(e=>`${t}${e}`)}postfix(t){return this.map(e=>`${e}${t}`)}multiply(t){return this.map(e=>e*t)}divide(t){return this.map(e=>e/t)}power(t){return this.map(e=>e**t)}toFixed(t){return this.map(e=>e.toFixed(t))}toEnglish(){return this.map(t=>isNaN(t)?t:function t(e){let r={1:"One",2:"Two",3:"Three",4:"Four",5:"Five",6:"Six",7:"Seven",8:"Eight",9:"Nine",10:"Ten",11:"Eleven",12:"Twelve",13:"Thirteen",14:"Fourteen",15:"Fifteen",16:"Sixteen",17:"Seventeen",18:"Eighteen",19:"Nineteen",20:"Twenty",30:"Thirty",40:"Forty",50:"Fifty",60:"Sixty",70:"Seventy",80:"Eighty",90:"Ninety",100:"Hundred"},i=listOf("Thousand","Million","Billion","Trillion","Quadrillion","Quintrillion","Sextillion","Septillion","Octillion","Nonillion","Decillion"),s=Math.abs(e);if(0===s)return"Zero";let[n,l]=s.toString().split("."),h=n.split("").reverse().toList().chunked(3),u=(t,e)=>t.toString().slice(t.toString().length-e),o=h.map(t=>(function t(e){if(e<10)return r[parseInt(e)];let i=u(e,2),s=r[i];if(!s){let[n,l]=i.split(""),h=r[10*n]||"",o=r[l]||"";s=parseInt(i)>0?`${h} ${o}`:""}let a="",f;return e>=100?(a=Math.floor(e/100),`${f=`${r[a]} ${r[100*a/a]}${i>0?" and ":""}`}${s}`):s})(t.reverse().join(""))),a=(0>Math.sign(e)?"Minus ":"")+o.map((t,e)=>0===e?t:t?`${t} ${i[e-1]}`:void 0).filter(Boolean).reverse().join(", "),f=l&&l.split("").map(t=>"0"===t?"Zero":r[t]).join(" ");return l?`${a} Point ${f}`:a}(t))}replace(t,e,r=-1){let i=0;return this.map(s=>s===t&&(i<r||r<0)?(i++,e):s)}range(){if(isNaN(this[0])||isNaN(this[1]))throw Error("Invalid list parameters");let t=this[0],e=this[1],r=listOf();for(let i=t;t<e?i<=e:i>=e;t<e?i++:i--)r.push(i);return r}exists(t){for(let e of this)if(isMatch(t,e))return!0;return!1}head(t=1){return t>this.length?this:this.slice(0,t)}tail(t=1){return t>this.length?this:this.slice(this.length-t,this.length)}clear(){for(;this.length;)this.pop();return this}static isList(t){return t instanceof List}equalsLength(...t){return 1===t.map(t=>t.length).toList().add(this.length).distinct().length}equals(t){if(this.length!==t.length)return!1;for(let e=0;e<this.length;e++){let r=this[e],i=t[e];if(Array.isArray(r)&&Array.isArray(i)){if(!r.equals(i))return!1}else if(r!==i)return!1}return!0}}class Triple extends Array{constructor(t,e,r){Object.freeze(super(t,e,r))}get first(){return this[0]}get second(){return this[1]}get third(){return this[2]}toList(){return listOf(this[0],this[1],this[2])}}class Pair extends Array{constructor(t,e){Object.freeze(super(t,e))}get first(){return this[0]}get second(){return this[1]}toList(){return listOf(this[0],this[1])}}function isMatch(t,e){return isFn(t)?t(e):t===e}function isFn(t){return"function"==typeof t}class Node{constructor(t=null,e=null,r=null){this.value=t,this.next=e,this.previous=r}}class LinkedList{constructor(){this.head=null,this.length=0}toString(){let t="",e=this.head;for(;e;)t=`${t}${e.value} -> `,e=e.next;return`${t}null`}static fromValues(...t){let e=new LinkedList;for(let r=t.length-1;r>=0;r--)e.insertAtHead(t[r]);return e}static fromList(t){return this.fromValues(...t)}toList(){let t=listOf(),e=this.head;for(;e;)t.push(e.value),e=e.next;return t}insertAtHead(t){let e=new Node(t,this.head);return this.head=e,this.length++,this}insertAtIndex(t,e){if(0===t)return this.insertAtHead(e);let r=this.getNodeByIndex(t-1);return null===r?null:(r.next=new Node(e,r.next),this.length++,this)}getNodeByIndex(t){if(t<0||t>=this.length)return null;let e=this.head;for(let r=0;r<t;r++)e=e.next;return e}getValueByIndex(t){if(t<0||t>=this.length)return null;let e=this.head;for(let r=0;r<t;r++)e=e.next;return e.value}removeHead(){this.head=this.head.next,this.length--}}class DoublyLinkedList{constructor(){this.head=new Node,this.length=0,this.tail=this.head}toString(){let t="",e=this.head;for(;e;)t=`${t}${e.value||null} <-> `,e=e.next;return`${t}null`}static fromValues(...t){let e=new DoublyLinkedList;for(let r=0;r<t.length;r++)e.insertAtHead(t[r]);return e}static fromList(t){return this.fromValues(...t)}toList(){let t=listOf(),e=this.head;for(;e;)t.push(e.value),e=e.next;return t.filterFirstNotNull()}insertAtHead(t){return this.append(t)}insertAtTail(t){return this.prepend(t)}append(t){let e=new Node(t);return this.tail.next=e,e.previous=this.tail,this.tail=e,this.length++,this}prepend(t){let e=new Node(t);return e.next=this.head,this.head.previous=e,this.head=e,this.length++,this}insert(t,e){return this.insertAtIndex(t,e)}insertAtIndex(t,e){if(!Number.isInteger(t)||t<0||t>this.length+1)throw Error(`Invalid index. Current length is ${this.length}`);if(0===t)return this.prepend(e),this;t===this.length&&this.append(e);let r=new Node(e),i=this.head;for(let s=0;s<t-1;s++)i=i.next;let n=i.next;return r.next=n,i.next=r,r.previous=i,n.previous=r,this.length++,this}remove(t){if(!Number.isInteger(t)||t<0||t>this.length+1)throw Error(`Invalid index. Current length is ${this.length}`);if(0===t)return this.head=this.head.next,this.head.previous=null,this.length--,this;if(t===this.length-1)return this.tail=this.tail.previous,this.tail.next=null,this.length--,this;let e=this.head;for(let r=0;r<t-1;r++)e=e.next;let i=e.next.next;return e.next=i,i.previous=e,this.length--,this}}class StringExtended extends String{constructor(...t){super(...t)}capitalize(t=[" ","-",":","_"],e=" "){let r=t.join("|"),i=RegExp(r,"gi");return this.split(i).map(t=>(t[0]?t[0].toUpperCase():"")+t.slice(1).toLowerCase()).join(e)}}function listOf(...t){return 1===t.length?new List(1).fill(...t):new List(...t)}function listOfType(t){return(...e)=>(e.forEach((e,r)=>{let i=e instanceof t||typeof e===t.name.toLowerCase();if(!i){let s=`Item at index '${r}' of type '${typeof e}' is not assignable to type: '${t.name}'`;throw Error(s)}}),listOf(...e))}function pairOf(t,e){if(2!==arguments.length)throw Error("Argument length of two expected");return new Pair(t,e)}function tripleOf(t,e,r){if(3!==arguments.length)throw Error("Argument length of three expected");return new Triple(t,e,r)}function mapOf(...t){let e=new Map,r=t.every(t=>t instanceof Pair);if(!r)throw Error("Arguments must be of type 'Pair'");return t.forEach(t=>{e.set(t.first,t.second)}),e}function strOf(t){return new StringExtended(t)}Array.prototype.toList=function(){return listOf(...this)},Set.prototype.toList=function(){return listOf(...this)},Object.prototype.toList=function(){return Object.entries(this).map(t=>t.toList()).toList()},Object.prototype.keys=function(){return Object.keys(this).toList()},Object.prototype.values=function(){return Object.values(this).toList()},Object.prototype.entries=function(){return this.toList()},Object.prototype.equals=function(t){let e=Object.keys(this),r=Object.keys(t);if(e.length!==r.length)return!1;for(let i of e){let s=this[i],n=t[i],l=isObject(s)&&isObject(n);if(l&&!s.equals(n)||!l&&s!==n)return!1}return!0},String.prototype.toExtended=function(){return new StringExtended(this)},String.prototype.extend=function(){return new StringExtended(this)};class Utils{static uuid(){let t="0123456789abcdef".split("").toList();return[8,4,4,4,12].map(e=>Array(e).fill(null).map(()=>t.random()).join("")).join("-")}}class Table{#a=listOf();#b=listOf();constructor(t){this.name=Symbol(t)}addColumns(...t){t.forEach(t=>{t instanceof Column?this.#a.push(t):this.#a.push(new Column(t))})}addHeadings(...t){return this.addColumns(...t)}insertRow(...t){if(t.length!==this.#a.length){let e=`Unable to insert entry of length (${t.length}) into column length of (${this.#a.length})`;throw Error(e)}let r=t.map((t,e)=>new Pair(this.#a[e].name,t));return this.#b.push(mapOf(...r)),this.#b[this.#b.length-1]}get rows(){return this.#b}toString(){let t=this.#a.map(t=>t.name).join(","),e=this.#b.map(t=>{let e=t.values(),r=listOf();for(let i=0;i<t.size;i++)r.push(e.next().value);return r.join(",")}).join("\n");return`${t}\n${e}`}}class Column{constructor(t){this.name=t}}module.exports={listOf,listOfType,pairOf,tripleOf,mapOf,Pair,Triple,List,Table,LinkedList,DoublyLinkedList,Utils,StringExtended,strOf};